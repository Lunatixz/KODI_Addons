define(["../../../controllers/ptvl"],function(n){n.controller("pluginDetailsCtrl",["$scope","pluginList","ruleFactory",function(n,e,u){e.async().then(function(e){n.plugins=e}),n.changed={value:!1,subfolders:!1,plugin:!1,sort:!1,limit:!1},n.sorts=u.getSorts(),n.limits=u.getLimits(),n.changes={},n.plugin={},15==n.channel.type.value?(n.sort=u.getSort(n.channel.rules.main[4]),n.limit=u.getLimit(n.channel.rules.main[3]),n.channel=u.getPluginParts(n.channel),n.plugin.addonid=n.channel.plugin.addonid,void(n.subfolders=n.channel.plugin.subfolders)):void 0,n.selectPlugin=function(e){n.plugin.addonid!==e.addonid?(n.changed.plugin=!0,n.changes.addonid=e.addonid,void(n.subfolders="")):(n.changed.plugin=!1,n.subfolders=n.channel.plugin.subfolders)},n.undoPlugin=function(){1==confirm("Are you sure you want to undo changing the plugin?")?(n.changed.plugin=!1,n.plugin.selected=n.plugin,n.subfolders=n.channel.plugin.subfolders):(n.changed.plugin=!0,n.changed.subfolders=!0)},n.changedSubs=function(){n.changed.subfolders=!0,n.changed.value=!0},n.undoSub=function(){1==confirm("Are you sure you want to undo changing the plugin subfolder path?")?n.subfolders=n.channel.plugin.subfolders:n.subfolders=""},n.selectSort=function(e){parseInt(n.channel.rules.main[4])!==e.value?(n.changed.sort=!0,n.changed.value=!0,n.changes.sort=e.value):(n.changed.sort=!1,n.changed.value=!1)},n.undoSort=function(){1==confirm("Are you sure you want to undo changing the plugin sort?")&&(n.changed.sort=!1,n.changed.value=!1,n.sort.selected=n.sort)},n.selectLimit=function(e){parseInt(n.channel.rules.main[3])!==e.value?(n.changed.limit=!0,n.changed.value=!0,n.changes.limit=e.value):(n.changed.limit=!1,n.changed.value=!1)},n.undoLimit=function(){1==confirm("Are you sure you want to undo changing the plugin sort?")&&(n.changed.limit=!1,n.changed.value=!1,n.limit.selected=n.limit)},n.savePlugin=function(e,u){e.plugin.subpath=u,e.rules.main[1]="plugin://"+e.plugin.addonid+"/"+e.plugin.subpath,e.rules.main[3]=n.changes.limit,e.rules.main[4]=n.changes.sort;for(var i in n.changed)n.changed[i]=!1}}])});